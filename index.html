<!DOCTYPE html>
<html>

<!-- This is an example web app that implements ORMJS. -->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <!-- 3rd party libraries -->
    <script type="text/javascript" src="lib/external/d3.v7.js" charset="UTF-8"></script>
    <!--script type="text/javascript" src="https://d3js.org/d3.v7.min.js"></script-->
    <script type="text/javascript" src="lib/external/d3-context-menu.js" charset="UTF-8"></script>
    <script type="text/javascript" src="docs/lib/external/prism.js" charset="UTF-8"></script>
    <!-- Style -->
    <link rel="stylesheet" href="style/external/d3-context-menu.css" type="text/css" />
    <link href="docs/style/prism.css" rel="stylesheet" />
    <link rel="stylesheet" href="style/orm-style.css" type="text/css" />
    <link rel="stylesheet" href="style/popup-style.css" type="text/css" />
    <link rel="stylesheet" href="docs/style/web-app-style.css" type="text/css" />
    <!-- Load ORMJS library. This is order-sensitive. -->
    <!-- Load ORMJS diagrams from SVG -->
    <script type="text/javascript" src="lib/parsers/parse-svg.js" charset="UTF-8"></script>
    <!-- Parse diagram to other formats -->
    <script type="text/javascript" src="lib/parsers/parse-to-xml.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/parsers/parse-to-rel.js" charset="UTF-8"></script>
    <!-- Parse diagram to metamodel -->
    <script type="text/javascript" src="lib/metamodel/metamodel-object.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/metamodel/metamodel-role.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/metamodel/metamodel-readings.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/metamodel/metamodel-fact.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/metamodel/metamodel-constructor.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/parsers/parse-orm.js" charset="UTF-8"></script>
    <!-- Graph constructors -->
    <script type="text/javascript" src="lib/highlight-rect.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/svg-constructor.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/graph-constructor.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/entity-constructor.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/value-constructor.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/rolebox-constructor.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/rolebox-constraints.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/constraint-constructor.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/constraint-paths.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/connector-constructor.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/connector-paths.js" charset="UTF-8"></script>
    <!-- Object properties -->
    <script type="text/javascript" src="lib/menus/object-option-menus.js" charset="UTF-8"></script>
    <script type="text/javascript" src="lib/menus/object-property-menu.js" charset="UTF-8"></script>
</head>

<body>

<div id="canvas"></div>
<div class="canvas_container"><canvas id="hidden_canvas"></canvas></div>

<div id="codepanel">
    <div id="rel_options">
        <div><input type="checkbox" id="highlightNoParse" /> Highlight relations not parsed to Rel</div>
        <div class="spacy">For testing purposes:
        <div><input type="checkbox" id="graphFormat" /> Graph Rel Format</div>
        <div><input type="checkbox" id="shortFormat" /> Short Rel Format</div>
        <div><input type="checkbox" id="parse_xml" /> Parse XML</div>
        </div>
    </div>
    <div id="rel"><pre><code class="language-js"></code></pre></div>
</div>

<div id="topbar">
    <span><label class="file-upload"><a id="downloadPngButton" class="topbutton" download="ormjs.png">Download PNG</a></label></span>
    <span><label class="file-upload"><a id="downloadSvgButton" class="topbutton" download="ormjs.svg">Download SVG</a></label></span>
    
    <label for="uploadSvgButton" class="file-upload">Upload SVG</label>
    <input type="file" id="uploadSvgButton" value="" multiple>
    <span id="uploadname" class="filename"></span>
    
    <!--span>Upload SVG: <input type="file" id="uploadSvgButton" value="" multiple></span-->
    <span class="zoom">Zoom: <input type="range" id="svgscale"></span> 
</div>

<script>
// Select the target node.
var target = document.querySelector('#rel')

// Create an observer instance.
var observer = new MutationObserver(function(mutations) {
    Prism.highlightAll();
});

// Pass in the target node, as well as the observer options.
observer.observe(target, {
    attributes:    true,
    childList:     true,
    characterData: true
});
</script>

</body>

</html>